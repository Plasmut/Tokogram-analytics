# WellGuard - Веб-приложение для мониторинга скважин

**WellGuard** - это веб-приложение, которое позволяет определять аварийность режима работы скважины по токограммам. Это поможет вам обратить внимание на объект и провести его плановый осмотр.

## Установка и запуск

Для запуска проекта достаточно открыть файл `WellGuard.bat`. Это откроет командную строку и перенаправит вас на локальное приложение.

## Структура приложения

Приложение состоит из трех основных страниц:

1. **Главная страница**
   - В этой странице приведены основные технические моменты по исследуемой работе.
  
2. **Анализ данных**
   - На этой странице представлен исследовательский анализ данных по датасету из папок. Вы можете постепенно пополнять его и наблюдать новые зависимости.
  
3. **Работа с моделью**
   - Здесь происходит выявление аномального режима и предсказание временного ряда посредством загрузки Excel-файла токограммы. 
   - **Формат данных:** 
     - Загрузка данных должна происходить без обрывов и пропусков.
     - Данные должны быть в формате двух столбцов:
       - 1-й столбец - дата
       - 2-й столбец - значение тока

   - В результате модель выдаст:
     - Предсказанный класс
     - Вероятность класса
     - Спрогнозированный ряд на основе предварительно обученной модели [lag-llama](https://huggingface.co/time-series-foundation-models/Lag-Llama).

## Подготовка приложения вручную при несовместимости библиотек

Для установки зависимостей используйте файл `requirements.txt`. Виртуальное окружение уже создано, но если оно было утеряно, выполните следующие шаги для его восстановления:

1. Создайте окружение через терминал:

   ```bash
   python3 -m venv env
   ```
2. Активируйте виртуальное окружение:
   ```
   env\Scripts\activate
   ```
3. Установите зависимости из файла `requirements.txt` для своей версии CUDA. В данном проекте предполагается установка для CUDA 12.1:
   ```
   pip install -r requirements.txt --extra-index-url https://download.pytorch.org/whl/cu121
   ```
4. Загрузите модель в папку lag-llama:
   ```
   huggingface-cli download time-series-foundation-models/Lag-Llama lag-llama.ckpt --local-dir lag-llama
   ```

## Разработка модели

Для создания собственной модели можно воспользоваться файлом `ItogModel.ipynb`, в котором применяются одномерная свёртка, случайное дерево и методы градиентного бустинга.
После проверки на тестовых данных можно будет выгрузить лучшую модель и загрузить её в веб-проект с помощью соответствующих библиотек.

## Примечание

В 'ItogModel.ipynb' применяются библиотеки, не используемые в `requirements.txt` из-за того, что они не нужны итоговому приложению. Советуется или дописать в `requirements.txt` требуемые для работы, или использовать из своих системных пакетов.